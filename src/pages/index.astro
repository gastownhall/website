---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import DiscordIcon from '../components/icons/DiscordIcon.astro';
import XIcon from '../components/icons/XIcon.astro';
import GitHubIcon from '../components/icons/GitHubIcon.astro';
import { site, social, blogPosts } from '../site.config';
---

<BaseLayout title={site.name}>
  <Hero />

  <section class="section blog-section">
    <h2>From the Blog</h2>
    <div class="blog-list">
      {blogPosts.map(post => (
        <a href={post.url} target="_blank" rel="noopener" class="blog-item">
          <div class="blog-content">
            <h3>{post.title}</h3>
            <p class="blog-excerpt">{post.description}</p>
            <span class="blog-date">{post.date}</span>
          </div>
          <img src={post.image} alt="" class="blog-image" loading="lazy" />
        </a>
      ))}
    </div>
  </section>

  <section class="section community-section">
    <h2>Join the Community</h2>
    <p class="section-intro">Connect with other Gas Town users and contributors.</p>
    <div class="community-actions">
      <a href={social.discord} target="_blank" rel="noopener" class="btn btn-discord btn-large">
        <DiscordIcon />
        Join Discord
      </a>
      <a href={social.x} target="_blank" rel="noopener" class="btn btn-secondary btn-large">
        <XIcon />
        Follow on X
      </a>
      <a href={social.github} target="_blank" rel="noopener" class="btn btn-secondary btn-large">
        <GitHubIcon />
        View on GitHub
      </a>
    </div>
  </section>
</BaseLayout>

<style>
  .section-intro {
    color: var(--color-text-muted);
    font-size: 1.125rem;
    margin-bottom: var(--space-lg);
    max-width: 600px;
  }

  .section h2 {
    margin-bottom: var(--space-lg);
  }

  .blog-section {
    max-width: 728px;
    margin: 0 auto;
  }

  .blog-list {
    display: flex;
    flex-direction: column;
  }

  a.blog-item {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 2rem;
    padding: 1.5rem 0;
    border-bottom: 1px solid var(--color-border);
    text-decoration: none;
    color: inherit;
  }

  a.blog-item:first-child {
    padding-top: 0;
  }

  a.blog-item:last-child {
    border-bottom: none;
  }

  a.blog-item:hover h3 {
    color: var(--color-text-muted);
  }

  .blog-content {
    flex: 1 1 auto;
    min-width: 0;
  }

  .blog-content h3 {
    font-size: 1.25rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    line-height: 1.3;
    transition: color 0.15s ease;
  }

  .blog-excerpt {
    color: var(--color-text-muted);
    font-size: 0.9375rem;
    line-height: 1.5;
    margin: 0 0 0.5rem 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .blog-date {
    font-size: 0.8125rem;
    color: var(--color-text-muted);
  }

  img.blog-image {
    width: 112px;
    height: 112px;
    min-width: 112px;
    max-width: 112px;
    object-fit: cover;
    border-radius: 4px;
    flex: 0 0 112px;
  }

  .community-section {
    text-align: center;
  }

  .community-section .section-intro {
    margin-left: auto;
    margin-right: auto;
  }

  .community-actions {
    display: flex;
    gap: var(--space-md);
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn-large {
    padding: 1rem 2rem;
    font-size: 1.0625rem;
  }

  @media (max-width: 768px) {
    a.blog-item {
      gap: 1rem;
    }

    img.blog-image {
      width: 80px;
      height: 80px;
      min-width: 80px;
      max-width: 80px;
      flex: 0 0 80px;
    }

    .blog-content h3 {
      font-size: 1.0625rem;
    }

    .community-actions {
      flex-direction: column;
      align-items: center;
    }

    .community-actions .btn {
      width: 100%;
      max-width: 300px;
      justify-content: center;
    }
  }
</style>
