---
import DocsLayout from '../../layouts/DocsLayout.astro';

const gettingStartedCards = [
  { href: "/docs/installing", title: "Installing Gas Town", description: "Get up and running with Gas Town in your environment." },
  { href: "/docs/reference", title: "CLI Reference", description: "Complete reference for all Gas Town commands." },
  { href: "/docs/glossary", title: "Glossary", description: "Definitions of Gas Town terminology and concepts." },
  { href: "/docs/why-these-features", title: "Why These Features", description: "The rationale behind Gas Town's design decisions." },
];

const conceptCards = [
  { href: "/docs/concepts/convoy", title: "Convoys", description: "Track batched work across multiple agents and issues." },
  { href: "/docs/concepts/identity", title: "Identity", description: "How actors are identified and attributed in Gas Town." },
  { href: "/docs/concepts/molecules", title: "Molecules", description: "The workflow system for orchestrating agent tasks." },
  { href: "/docs/concepts/polecat-lifecycle", title: "Polecat Lifecycle", description: "How ephemeral workers are managed by Witnesses." },
  { href: "/docs/concepts/propulsion-principle", title: "Propulsion Principle", description: "The core philosophy: if work is on your hook, YOU RUN IT." },
];

const architectureCards = [
  { href: "/docs/design/architecture", title: "Architecture Overview", description: "High-level system design and component interactions." },
  { href: "/docs/design/convoy-lifecycle", title: "Convoy Lifecycle", description: "How convoys are created, tracked, and completed." },
  { href: "/docs/design/dog-pool-architecture", title: "Dog Pool Architecture", description: "Infrastructure helpers managed by the Deacon." },
  { href: "/docs/design/escalation", title: "Escalation", description: "How issues get escalated when agents need help." },
  { href: "/docs/design/escalation-system", title: "Escalation System", description: "Detailed design of the escalation mechanisms." },
  { href: "/docs/design/federation", title: "Federation", description: "Cross-rig coordination and distributed work." },
  { href: "/docs/design/mail-protocol", title: "Mail Protocol", description: "Inter-agent communication system." },
  { href: "/docs/design/operational-state", title: "Operational State", description: "Managing and tracking system state." },
  { href: "/docs/design/plugin-system", title: "Plugin System", description: "Extending Gas Town with custom plugins." },
  { href: "/docs/design/property-layers", title: "Property Layers", description: "Configuration and property inheritance." },
  { href: "/docs/design/watchdog-chain", title: "Watchdog Chain", description: "Supervision hierarchy and health monitoring." },
];

const advancedCards = [
  { href: "/docs/beads-native-messaging", title: "Beads Native Messaging", description: "Native messaging integration with Beads." },
  { href: "/docs/formula-resolution", title: "Formula Resolution", description: "How formulas are resolved and executed." },
  { href: "/docs/mol-mall-design", title: "Mol Mall Design", description: "Molecule marketplace and discovery." },
];

const exampleCards = [
  { href: "/docs/examples/hanoi-demo", title: "Hanoi Demo", description: "Solving Tower of Hanoi with Gas Town molecules." },
];
---

<DocsLayout title="Documentation" description="Gas Town documentation and guides">
  <p class="intro">
    Gas Town is an orchestration layer that treats AI agent work as structured data. Every action is
    attributed. Every agent has a track record. Every piece of work has provenance.
  </p>

  <h2>Why Gas Town Exists</h2>
  <p>As AI agents become central to engineering workflows, teams face new challenges:</p>
  <ul>
    <li><strong>Accountability</strong> — Who did what? Which agent introduced this bug?</li>
    <li><strong>Quality</strong> — Which agents are reliable? Which need tuning?</li>
    <li><strong>Efficiency</strong> — How do you route work to the right agent?</li>
    <li><strong>Scale</strong> — How do you coordinate agents across repos and teams?</li>
  </ul>

  <h2>Getting Started</h2>
  <div class="doc-grid">
    {gettingStartedCards.map((card, index) => (
      <a href={card.href} class="doc-card" style={`--card-index: ${index}`}>
        <h3>{card.title}</h3>
        <p>{card.description}</p>
      </a>
    ))}
  </div>

  <h2>Core Concepts</h2>
  <div class="doc-grid">
    {conceptCards.map((card, index) => (
      <a href={card.href} class="doc-card" style={`--card-index: ${index}`}>
        <h3>{card.title}</h3>
        <p>{card.description}</p>
      </a>
    ))}
  </div>

  <h2>Architecture & Design</h2>
  <div class="doc-grid">
    {architectureCards.map((card, index) => (
      <a href={card.href} class="doc-card" style={`--card-index: ${index}`}>
        <h3>{card.title}</h3>
        <p>{card.description}</p>
      </a>
    ))}
  </div>

  <h2>Advanced Topics</h2>
  <div class="doc-grid">
    {advancedCards.map((card, index) => (
      <a href={card.href} class="doc-card" style={`--card-index: ${index}`}>
        <h3>{card.title}</h3>
        <p>{card.description}</p>
      </a>
    ))}
  </div>

  <h2>Examples</h2>
  <div class="doc-grid">
    {exampleCards.map((card, index) => (
      <a href={card.href} class="doc-card" style={`--card-index: ${index}`}>
        <h3>{card.title}</h3>
        <p>{card.description}</p>
      </a>
    ))}
  </div>
</DocsLayout>

<style>
  .intro {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    margin-bottom: var(--space-lg);
    line-height: 1.7;
    animation: fadeIn 0.6s var(--ease-out-expo) both;
  }

  .doc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
  }

  .doc-card {
    display: block;
    padding: var(--space-md);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    text-decoration: none;
    color: inherit;
    transition:
      border-color var(--duration-normal) var(--ease-in-out-smooth),
      box-shadow var(--duration-slow) var(--ease-out-expo),
      transform var(--duration-normal) var(--ease-out-expo);
    animation: fadeInUp 0.5s var(--ease-out-expo) both;
    animation-delay: calc(var(--card-index) * 50ms);
  }

  .doc-card:hover {
    border-color: var(--color-brass);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    transform: translateY(-3px);
    text-decoration: none;
  }

  .doc-card h3 {
    font-size: 1rem;
    font-family: var(--font-body);
    font-weight: 600;
    margin: 0 0 var(--space-xs) 0;
    color: var(--color-text);
    transition: color var(--duration-fast) var(--ease-in-out-smooth);
  }

  .doc-card:hover h3 {
    color: var(--color-accent);
  }

  .doc-card p {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin: 0;
    line-height: 1.5;
  }

  @media (max-width: 768px) {
    .doc-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
